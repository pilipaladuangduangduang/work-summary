# 编码心得工作归纳

标签（空格分隔）： 工作总结

---

## 在该笔记中总结工作开发过程后的一些心得：

### 重构代码采坑总结出的经验

重构别人的代码或者很久之前的代码，需要按照如下准则：
	1、一个方法可能被多个地方引用，可以用 Ctrl + 鼠标左键来查看引用的地方；
	2、要兼容历史版本，逻辑复杂的时候，可以直接加 if 条件来隔离，而不是让你的代码统一处理；
    3、时间紧迫时，新增接口而不是修改接口；
	4、未完待续...

### 数据采集开发的反思

 > 组长叫我去实现的一个数据采集的功能，就是每天定时去一张表里面捞数据，大体上功能是实现了，但是我思考的不够严谨，没有考虑到当系统宕机、系统停机升级时就会留有一段空白时间没有采集数据，这就会很致命，因为采集数据最基本的保证是所有数据都不能丢。
 
### 空指针异常

 > 可以这么说，当你代码出现这个异常，说明你的代码不够健壮，空指针异常是线上绝对禁止出现的异常，代码中一定要做非空校验，遵循这条准则：如果你认为这里有可能返回为Null，那么这里就必定会返回Null。

### for 循环增删改查数据是愚蠢的

 > 在代码中通过 for 循环来增删改查数据，是绝对不允许的，数据量小的时候没多大问题，但是当数据量大的时候就会“爆炸”。
 
### 数据库表的字段全都不能为空

 > 很多人设计数据库表都会把字段（除了主键或唯一键）设置为可以为Null，殊不知这会对后序的数据造成很大的影响，由于各种不可控因素（程序写的有问题，手动操作数据库，执行了没有review过的SQL，写程序的人技术不一）就会造成有些关键数据为Null，久而久之数据量大的时候，就会变得很难分析，所以我还是建议所有字段都设置为不能为Null，即使真的要有可以为空的字段，可以设置一个默认值
 
### 执行脚本通过输出错误来定位问题

 > 由于linux环境在各个机器上都很难统一的问题，所以就会出现你在开发环境可以正常执行的脚本，在线网环境会有问题，这个时候我们就需要定位问题，可以通过在执行命令行最后加上 >> xxx.log 2>&1 ，这段命令的意思就是将这次执行结果的标准错误输出到 xxx.log 这个文件中
 
 
