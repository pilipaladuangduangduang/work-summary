# 编码心得工作归纳

标签（空格分隔）： 工作总结

---

## 在该笔记中总结工作开发过程后的一些心得：

### 线上BUG的反思

 > 今天由于自己的考虑不周，引发了一个线上问题；我对此次事故的反思就是：以后修改某个方法的时候，一定是要<font color="FF2D2D">先查看当前方法在哪些地方被调用了</font>，然后再去修改，防止出现不兼容的问题。

### 数据采集开发的反思

 > 组长叫我去实现的一个数据采集的功能，就是每天定时去一张表里面捞数据，大体上功能是实现了，但是我思考的不够严谨，没有考虑到当系统宕机、系统停机升级时就会留有一段空白时间没有采集数据，这就会很致命，因为采集数据最基本的保证是所有数据都不能丢。
 
### 一条编写Java代码很重要的规范

 > 在经历了多次的线上BUG的摧残之后，我又领悟到了一个原理：很多线上BUG都是因为数据出错而导致查询出来的对象为null，所以在以后代码中有使用到对象的时候<font color="FF2D2D">必须要进行非null校验</font>，或者通过Optional特性解决。

### 调用外部服务出现错误时

> 调用外部服务出现错误时，一般都会有相应的文档，记得去看哦。

### 关于提升接口性能的一点心得

 > 今天组长说我写的代码有点问题，原因是我代码中查询redis的次数过于频繁，叫我优化下，所以我得出<font color="FF2D2D">不仅数据库要少查（能一次查出来绝不查两次），redis也要少查</font>。

### 重复做一件事的心得

 > 写了很长时间的上传文件代码，其中包含着大量的重复代码，对此我有一些心得（很多人都不去想如何抽取）；
 
 > 首先在properties文件中定义好不同类型文件的存放目录，由PropertiesUtils来读取配置文件获得具体的路径；
 
 > 创建一个类FilePathAndDir来管理所有文件的存储路径，并且定义初始化方法来创建文件夹；
 
 > 最后由Spring上下文来管理该Bean并调用该Bean的初始化方法。
 
### 数据库表的字段全都不能为空

 > 很多人设计数据库表都会把字段（除了主键或唯一键）设置为可以为Null，殊不知这会对后序的数据造成很大的影响，由于各种不可控因素（程序写的有问题，手动操作数据库，执行了没有review过的SQL，写程序的人技术不一）就会造成有些关键数据为Null，久而久之数据量大的时候，就会变得很难分析，所以我还是建议所有字段都设置为不能为Null，即使真的要有可以为空的字段，可以设置一个默认值
 
### 执行脚本通过输出错误来定位问题

 > 由于linux环境在各个机器上都很难统一的问题，所以就会出现你在开发环境可以正常执行的脚本，在线网环境会有问题，这个时候我们就需要定位问题，可以通过在执行命令行最后加上 >> xxx.log 2>&1 ，这段命令的意思就是将这次执行结果的标准错误输出到 xxx.log 这个文件中
 
 
